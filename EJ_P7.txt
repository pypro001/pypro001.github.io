PRACTICAL 7
IMPLEMENT THE FOLLOWING EJB 
APPLICATIONS WITH DIFFERENT TYPES 
OF BEANS.

PART A
AIM: Develop simple EJB application to demonstrate Servlet 
Hit count using Singleton Session Beans.
index.html:
<!DOCTYPE html>
<html>
 <head>
 <title>Singleton EJB</title>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 </head>
 <body>
 <form action="HitCountServlet" method="post">
 Check the number of hits on the page :
 <br><br>
 <input type="Submit" value="Check Count">
 </form>
 </body>
</html>
HitCountServlet.java:
package demoCounter;
import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.ejb.EJB;
import mybean.HitCounterBean;
public class HitCountServlet extends HttpServlet {
 @EJB HitCounterBean obj;
 @Override
 protected void service(HttpServletRequest request, HttpServletResponse response)
 throws ServletException, IOException {
 response.setContentType("text/html;charset=UTF-8");
 PrintWriter out = response.getWriter();
 out.println("You have visited the page "+obj.verifyCount()+" times.");
 }
}
HitCounterBean.java:
package mybean;
import javax.ejb.Singleton;
@Singleton
public class HitCounterBean {
 private int count=0;
 public HitCounterBean(){}
 public int verifyCount(){
 return count++;
 }
}

PART C
AIM: Develop simple Marks Entry Application to demonstrate 
accessing Database using
EJB.
index.html:
<!DOCTYPE html>
<html>
 <head>
 <title>Marks entry demo</title>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 </head>
 <body>
 <form action="MarksEntry">
 <center>
 <h2>Student details</h2>
 Enter student name : <input type="text" name="txtName"><br><br>
 Enter subject 1 marks : <input type="text" name="marks1"><br><br>
 Enter subject 2 marks : <input type="text" name="marks2"><br><br>
 Enter subject 3 marks : <input type="text" name="marks3"><br><br>
 Enter subject 4 marks : <input type="text" name="marks4"><br><br>
 Enter subject 5 marks : <input type="text" name="marks5"><br><br>
 <input type="submit" value="Insert">
 <input type="reset" value="Clear">
 </center>
 </form>
 </body>
</html>
MarksEntry.java:
package demoM;
import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.ejb.EJB;
import mybean.MarksBean;
public class MarksEntry extends HttpServlet {
 
 @EJB MarksBean obj;
 @Override
 protected void service(HttpServletRequest request, HttpServletResponse response)
 throws ServletException, IOException {
 response.setContentType("text/html;charset=UTF-8");
 PrintWriter out = response.getWriter();
 String msg = "";
 String Studname = request.getParameter("txtName");
 int marks1 = Integer.parseInt(request.getParameter("marks1"));
 int marks2 = Integer.parseInt(request.getParameter("marks2"));
 int marks3 = Integer.parseInt(request.getParameter("marks3"));
 int marks4 = Integer.parseInt(request.getParameter("marks4"));
 int marks5 = Integer.parseInt(request.getParameter("marks5"));
 int totalmarks = marks1 + marks2 + marks3 + marks4 + marks5;
 msg=obj.marksEntry(Studname, marks1, marks2, marks3, marks4, marks5, totalmarks);
 out.println(msg);
 }
}
MarksBean.java:
package mybean;
import javax.ejb.Stateless;
import java.sql.*;
@Stateless
public class MarksBean {
 public String marksEntry(String name, int mrk1, int mrk2, int mrk3, int mrk4, int mrk5, int total){
 String confirmationMsg="";
 try{
 Class.forName("com.mysql.jdbc.Driver");
 Connection con=DriverManager.getConnection("jdbc:mysql://localhost:3306/StudentMarks", "ro
ot", "Basilkutty*2k3");
 PreparedStatement pstm=con.prepareStatement("INSERT INTO stdmarks VALUES(?, ?, ?, ?, ?, ?
, ?)");
 pstm.setString(1, name);
 pstm.setInt(2, mrk1);
 pstm.setInt(3, mrk2);
 pstm.setInt(4, mrk3);
 pstm.setInt(5, mrk4);
 pstm.setInt(6, mrk5);
 pstm.setInt(7, total);
 int r=pstm.executeUpdate();
 if(r==1){
 confirmationMsg="<h2><b>Marks of student name : "+name+"</b> have been updated succes
sfully.</h2>";
 }
 }
 catch(Exception e){
 
 }
 return confirmationMsg;
 }
}
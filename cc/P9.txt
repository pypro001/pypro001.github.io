PRACTICAL 9
DATABASE PROGRAMMING WITH SQLITE
AIM : To demonstrate Database programming with SQLite in Android.
PROGRAM :
MainActivity.java
package com.sonic.pract_9;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;
import androidx.appcompat.app.AppCompatActivity;
class MyDB extends SQLiteOpenHelper{
MyDB(Context c){
super(c, "logindb", null, 1);
}
@Override
public void onCreate(SQLiteDatabase db){
String str = "create table login(username text, password text)";
db.execSQL(str);
}
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion){
String dr="drop table if exists login";
db.execSQL(dr);
onCreate(db);
}
}
public class MainActivity extends AppCompatActivity {
MyDB mdb;
EditText userName, password;
Button bregister, bdrop, blogin;
SQLiteDatabase db;
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
userName=(EditText) findViewById(R.id.txtusername);
password=(EditText) findViewById(R.id.txtpass);
blogin=(Button) findViewById(R.id.login);
bregister=(Button) findViewById(R.id.register);
bdrop=(Button) findViewById(R.id.drop);
mdb=new MyDB(this);
}
public void login_fun(View v){
String un=String.valueOf(userName.getText());
String pas=String.valueOf(password.getText());
db=mdb.getReadableDatabase();
String q="select * from login where username = '"+un+"' and password = '"+pas+"'";
try {
Cursor c =db.rawQuery(q, null);
if(c.getCount()==0){
Toast.makeText(getApplicationContext(), "Username or password wrong or user doesn't exists", Toast.LENGTH_SHORT).show();
}else {
while (c.moveToNext()){
String uname=c.getString(0);
String passw=c.getString(1);
Toast.makeText(getApplicationContext(), "Username : "+uname+"\nPassword : "+passw, Toast.LENGTH_LONG).show();
if(un.contentEquals(uname) && pas.contentEquals(passw)){
Toast.makeText(getApplicationContext(), "Welcome user : "+un, Toast.LENGTH_LONG).show();
c.close();
}
}
}
}catch (SQLiteException sqle){
sqle.printStackTrace();
}
}
public void register_fun(View v){
String un=String.valueOf(userName.getText());
String pas=String.valueOf(password.getText());
db=mdb.getWritableDatabase();
String q="insert into login values('"+un+"', '"+pas+"')";
db.execSQL(q);
Toast.makeText(getApplicationContext(), "User registered", Toast.LENGTH_LONG).show();
}
public void drop_fun(View v){
db=mdb.getWritableDatabase();
mdb.onUpgrade(db, 1, 2);
Toast.makeText(getApplicationContext(), "All users deleted", Toast.LENGTH_SHORT).show();
}
}



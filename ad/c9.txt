			practical-09

Create an Android application to record the current location. Based on the current location
allow the user to use some useful services/applications

<<<<<<<AndroidManifest.xml file>>>>>>>>>>>>>>>>>>>>>

<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />


<<<<<<<<<activity_main.xml>>>>>>>>>>>>>>>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/main_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity">

    <TextView
        android:id="@+id/text_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="24sp"
        android:text="@string/record_location"
        android:layout_marginTop="16dp"
        android:layout_marginBottom="16dp"
        android:layout_centerHorizontal="true"
        android:layout_alignParentTop="true" />

    <Button
        android:id="@+id/record_location_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/record_location_button"
        android:layout_below="@+id/text_view"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="32dp" />

    <Button
        android:id="@+id/useful_services_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/useful_services_button"
        android:layout_below="@+id/record_location_button"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="32dp"
        android:enabled="false" />

</RelativeLayout>



kt file 

package com.example.locationdemo

import android.Manifest
import android.content.Intent
import android.content.pm.PackageManager
import android.location.Location
import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.provider.Settings
import android.widget.Button
import android.widget.TextView
import android.widget.Toast
import androidx.core.app.ActivityCompat
import androidx.core.content.ContextCompat
import com.google.android.gms.location.FusedLocationProviderClient
import com.google.android.gms.location.LocationServices

class MainActivity : AppCompatActivity() {

    private lateinit var textView: TextView
    private lateinit var recordLocationButton: Button
    private lateinit var usefulServicesButton: Button

    private lateinit var fusedLocationClient: FusedLocationProviderClient

    companion object {
        const val LOCATION_PERMISSION_REQUEST_CODE = 100
    }

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        textView = findViewById(R.id.text_view)
        recordLocationButton = findViewById(R.id.record_location_button)
        usefulServicesButton = findViewById(R.id.useful_services_button)

        fusedLocationClient = LocationServices.getFusedLocationProviderClient(this)

        recordLocationButton.setOnClickListener {
            requestLocationPermission()
        }

        usefulServicesButton.setOnClickListener {
            val location = getLastKnownLocation()
            if (location != null) {
                val latitude = location.latitude
                val longitude = location.longitude
                val intent = Intent(Intent.ACTION_VIEW,
                    Uri.parse("geo:$latitude,$longitude?q=restaurants"))
                startActivity(intent)
            } else {
                Toast

<<<<<<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
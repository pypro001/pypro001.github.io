Practical-5

5(A):Create Web form to demonstrate use of Website Navigation controls and Site Map.
Web.sitemap
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
	<siteMapNode url="prac5a.aspx" title="Home" description="Homepage of our website">
	<siteMapNode url="clsProp.aspx" title="Page2" description="Page2"/>
	<siteMapNode url="Default2.aspx" title="Page3" description="Page3"/>
	<siteMapNode url="Default3.aspx" title="Page4" description="Page4" />
	</siteMapNode>
</siteMap>

Default3.aspx
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <asp:SiteMapDataSource ID="SiteMapDataSource1" runat="server" />
            <asp:Menu ID="Menu1" runat="server" DataSourceID="SiteMapDataSource1">
            </asp:Menu>
        </div>
    </form>
</body>
</html>

5(B):Create Web Application to demonstrate use 
of Master Page with applying Styles and Themes for a page beautification.

SkinFile.skin
<asp:Label runat="server" ForeColor="red" Font-Size="14pt" Font-Names="Verdana"/> 
<asp:button runat="server" Borderstyle="Solid" Borderwidth="2px" 
Bordercolor="Blue" Backcolor="Orange"/>

StyleSheet.css
body
{
    background-color: Lime;
    font-family: Cambria;
    font-size: 18px;
}

StyleSheet.css
body
{
    background-color: Lime;
    font-family: Cambria;
    font-size: 18px;
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class demo : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        Label3.Text = "The Beast Incarnate";
    }
}

5(C):Create Web Application to demonstrate various States of ASP.NET Pages.

ViewState
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if(!IsPostBack)
        {
            string str = "Pradhumn Vats";
            if (ViewState["nam"]==null)
            {
                ViewState["nam"] = str;
            }
        }
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        Label1.Text = (Convert.ToInt16(Label1.Text)+ 1).ToString();
        Label2.Text = ViewState["nam"].ToString();
    }


    protected void Button2_Click(object sender, EventArgs e)
    {
        Response.Write(ViewState["username"].ToString());
    }
}


Query String
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class Default2 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        Response.Redirect("Default3.aspx?UserId=" + TextBox1.Text + "&UserName=" + TextBox2.Text);
    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class Default3 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            lblUserId.Text = Request.QueryString["UserId"];
            lblUserName.Text = Request.QueryString["UserName"];
        }
    }
}

Cookies
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;

public partial class Default4 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (Request.Cookies["BackgroundColor"]!= null)
        {
            ColorSelector.SelectedValue = Request.Cookies["BackgroundColor"].Value;
            BodyTag.Style["background-color"] = ColorSelector.SelectedValue;
        }
    }
    protected void ColorSelector_IndexChanged(object sender, EventArgs e)
    {
        BodyTag.Style["background-color"] = ColorSelector.SelectedValue;
        HttpCookie cookie = new HttpCookie("BackgroundColor"); 
        cookie.Value = ColorSelector.SelectedValue;
        cookie.Expires = DateTime.Now.AddMilliseconds(20);
        Response.SetCookie(cookie);

    }
}

Session and Application State
Global.asax
<%@ Application Language="C#" %>

<script runat="server">

    void Application_Start(object sender, EventArgs e)
    {
        // Code that runs on application startup
        Application["OnlineUsers"] = 0;
    }

    void Application_End(object sender, EventArgs e)
    {
        //  Code that runs on application shutdown

    }

    void Application_Error(object sender, EventArgs e)
    {
        // Code that runs when an unhandled error occurs

    }

    void Session_Start(object sender, EventArgs e)
    {
        // Code that runs when a new session is started
        Application.Lock();
        Application["OnlineUsers"] = (int)Application["OnlineUsers"] + 1;
        Application.UnLock();
    }

    void Session_End(object sender, EventArgs e)
    {
        // Code that runs when a session ends. 
        // Note: The Session_End event is raised only when the sessionstate mode
        // is set to InProc in the Web.config file. If session mode is set to StateServer 
        // or SQLServer, the event is not raised.
        Application.Lock();
        Application["OnlineUsers"] = (int)Application["OnlineUsers"] - 1;
        Application.UnLock();
    }

</script>

Web.config
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  https://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <system.web>
	  <sessionState mode="InProc" cookieless="false" timeout="1"/>
    <compilation debug="true" targetFramework="4.7.2" />
    <httpRuntime targetFramework="4.7.2" />
  </system.web>
  <system.codedom>
    <compilers>
      <compiler language="c#;cs;csharp" extension=".cs" type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.CSharpCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=2.0.1.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" warningLevel="4" compilerOptions="/langversion:default /nowarn:1659;1699;1701" />
      <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.VBCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=2.0.1.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" warningLevel="4" compilerOptions="/langversion:default /nowarn:41008 /define:_MYTYPE=\&quot;Web\&quot; /optionInfer+" />
    </compilers>
  </system.codedom>
</configuration>

<body>
    <form id="form1" runat="server">
        <div>
        Visitors Count:<%=Application["OnlineUsers"].ToString() %>
        </div>
    </form>
</body>


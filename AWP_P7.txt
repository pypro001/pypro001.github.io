Practical-7

7(A):Create a Web application to display Databinding using Dropdownlist control.
using System;
using System.Collections.Generic;
using System.Configuration;
using System.Data.SqlClient;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class Default3 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack == false)
        {
            string connStr = ConfigurationManager.ConnectionStrings["connStr"].ConnectionString;
            SqlConnection con = new SqlConnection(connStr);
            SqlCommand cmd = new SqlCommand("Select Distinct Country from Customer", con);
            con.Open();
            SqlDataReader reader = cmd.ExecuteReader();
            DropDownList1.DataSource = reader;
            DropDownList1.DataTextField = "Country";
            DropDownList1.DataBind();
            reader.Close();
            con.Close();

        }
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        Label1.Text = "The Country You Have Selected is:" + DropDownList1.SelectedValue;
    }
}

7(B):Create a Web application to display the Phone No. of Customer using database.
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Configuration;
using System.Data.SqlClient;
using System.Data;

public partial class Default4 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack == false)
        {
            string connStr = ConfigurationManager.ConnectionStrings["connStr"].ConnectionString;
            SqlConnection con = new SqlConnection(connStr);
            SqlCommand cmd = new SqlCommand("Select Distinct FirstName,LastName,Phone from Customer", con);
            con.Open();
            SqlDataReader reader = cmd.ExecuteReader();
            DropDownList1.DataSource = reader;
            DropDownList1.DataTextField = "FirstName";
            DropDownList1.DataValueField = "Phone";
            DropDownList1.DataBind();
            reader.Close();
            con.Close();

        }
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        Label1.Text = "Your Phone Number is:" + DropDownList1.SelectedValue;
    }
}

7(C):Create a Web application for inserting and deleting record from a database.
using System;
using System.Collections.Generic;
using System.Configuration;
using System.Data.SqlClient;
using System.Drawing;
using System.Linq;
using System.Reflection.Emit;
using System.Security.Policy;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class Default5 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void Button2_Click(object sender, EventArgs e)
    {
        string connStr = ConfigurationManager.ConnectionStrings["connStr"].ConnectionString;
        SqlConnection con = new SqlConnection(connStr);
        string InsertQuery = "delete from customer where FirstName=@fname";
        SqlCommand cmd = new SqlCommand(InsertQuery, con);
        cmd.Parameters.AddWithValue("@fname", TextBox1.Text);
        con.Open();
        cmd.ExecuteNonQuery();
        Label1.Text = "Record Deleted Successfuly.";
        con.Close();
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        string connStr = ConfigurationManager.ConnectionStrings["connStr"].ConnectionString;
        SqlConnection con = new SqlConnection(connStr);
        string InsertQuery = "insert into customer values(@fname, @lname, @city, @country,@phone)";
        SqlCommand cmd = new SqlCommand(InsertQuery, con); 
        cmd.Parameters.AddWithValue("@fname", TextBox1.Text);
        cmd.Parameters.AddWithValue("@lname", TextBox2.Text);
        cmd.Parameters.AddWithValue("@city", TextBox3.Text); 
        cmd.Parameters.AddWithValue("@country", TextBox4.Text);
        cmd.Parameters.AddWithValue("@phone", TextBox5.Text);
        con.Open();
        Label1.Text = "Record Inserted Successfuly.";
        con.Close();
    }
}

